A simple method for estimating the fractal dimension from digital images: The compression dimension

Abstract
The fractal structure of real world objects is often analyzed using digital images. In this context, the compression fractal dimension is put forward. It provides a simple method for the direct estimation of the dimension of fractals stored as digital image files. The computational scheme can be implemented using readily available free software. Its simplicity also makes it very interesting for introductory elaborations of basic concepts of fractal geometry, complexity, and information theory. A test of the computational scheme using limited-quality images of well-defined fractal sets obtained from the Internet and free software has been performed. Also, a systematic evaluation of the proposed method using computer generated images of the Weierstrass cosine function shows an accuracy comparable to those of the methods most commonly used to estimate the dimension of fractal data sequences applied to the same test problem. * pedcha@tel.uva.es

I. INTRODUCTION
One of the most common descriptions of a given case study in Science and Engineering is through a graphical representation in an image. Fractal analysis of digital images is of great value, for instance, in Medicine  #b0  #b1  #b2  #b3  #b4  or Botanics  #b5  #b6  and for the characterization of many other physical processes  #b7  #b8 .The algorithms normally used for calculating the fractal dimension of images  #b8  #b9  #b10  are rather involved and the absence of simple to use and freely distributed software tools can limit the widespread use of fractal methods in digital image analysis. Furthermore, they are typically based on the processing of the image data that should be extracted from the picture file when this is the available source format. In this work, a simple approach is proposed for estimating the information fractal dimension. The algorithm is oriented to its direct application to image files working with ordinary software tools and it can be used with no further prepossessing, no matter how the image is captured or generated.The simplicity of the proposed computational scheme and its direct relation to basic concepts in information theory and complexity theory makes it suitable for computer lab experiments in fractal analysis  #b11 . The potential of introductory fractal analysis even in high-school education was already highlighted in  #b12 .One major difference between the fractals found in empirical sciences and their mathematical counterparts is the existence of a finite limit to the scaling property in any real-world fractal. For fractal images, there are stringent restraints arising from the constrained image resolution  #b13  and the effect of noise  #b14 . To test the scheme proposed in this work, images of well-known fractal objects available in the Internet have been used without paying special attention to their resolution level. Therefore, the results show the potential of the method for estimating the dimension of fractal images far from ideal conditions. In a second systematic evaluation using computer synthesized fractals, the impact of the image resolution and other details of the implementation on the accuracy of the estimations is assessed.The results of this study show that the performance of the proposed algorithm compares favorably, in terms of accuracy, with methods normally used for estimating the dimension of fractal sequences.

II. THE COMPRESSION DIMENSION


A. Information fractal dimension
Hausdorff dimension provides a rigorous mathematical definition of dimension  #b15 . In an intuitive way, this concept can be introduced through the exponent describing the variation of the size of an object with the scale used to measure it  #b15  #b16 ,size ∼ scale dimension .(1)For a segment, both its size and scale are given by its length and the dimension is one. A circle is an example of a two-dimensional object since its size (area) scales with its diameter as size = π × scale 2 . For a sphere the size (volume) is related with the scale (diameter) as size = π/6 × scale 3 and its dimension is three. A fractal object in the plane, like a coastline, will have dimension larger than one (and smaller than two) as a consequence of the space-filling properties of the graph and its infinite length.Calculating fractal dimensions is the primary objective in the study of fractals and can be a fairly complex task. One possibility for calculating fractal dimensions is the box-counting approach. At each resolution r, one defines a grid covering the object that is being analyzed (squares for the plane and cubes in space) and then counts the number n(r) of nonempty grid boxes. The box-counting dimension is then defined asD B = lim r→0 − log n(r) log r = lim s→∞ log n(s) log s ,(2)or n(r) ∼ (1/r) D B , i.e. n(s) ∼ s D B , where the scale s is the inverse of the resolution s = 1/r.An alternative approach is given by the information dimension  #b16 . One determines how many bits of information H(r) are needed to specify a point in the object with a accuracy set by r. The information dimension is then given byD I = lim r→0 −H(r) log r = lim s→∞ H(s) log s .(3)H is the Shannon Entropy  #b17  of the fractal. If we partition the fractal in boxes of size r we needH = − i P i log 2 P i(4)bits of information to specify one box or, equivalently, to specify the position of a point in the fractal to an accuracy r. P i in (4) is the probability measure (the size) of box i.Different indirect estimates for the entropy have been used to analyze data sequences in complex dynamical systems, such as electroencephalograms  #b18 . Our approach, instead, focuses on the direct estimation of the information dimension of geometrical objects based on data compression.

B. Data compression
Data compression aims to produce an encoding that gives the shortest possible description of the information content of the data. Shannon entropy is the fundamental lower bound for compressing information  #b17 . For the commonly employed compression schemes, likeLempel-Ziv (LZ) algorithm, it can be proved  #b17  that the compressed file size equals the entropy of the data asymptotically in the number of symbols. From a practical point of view, such assumption is reasonable for regular image file sizes. A second compression of an efficiently compressed file should yield a negligible size reduction ratio, since the file size is already very close to the entropy limit. This can be used as a check for the performance of a file compression software. Also, the entropy limit can be approached in a two-step scheme if the compression efficiency is poor for large files.We will use freely available and very efficient data compression software to obtain approximate values of Shannon entropy in our calculations of the fractal dimension. Data compression software is also routinely used, for instance, for estimating the Kolmogorov complexity distance  #b19 .Note that we have to use lossless data compression algorithms that permit us to fully recover the uncompressed data, and we have to be careful to avoid lossy compression algorithms used, for instance, in JPEG image file files that achieve high compression rates at the cost of loss of information.

C. Image files
There are two types of graphic formats for the computer representation of images. In vector graphic formats the different elements that constitute the image are mathematically specified as geometrical primitives (such as lines, circles, etc.). Therefore, the image file contains indications for reconstructing the image at any required level of detail. Scaling an image stored in a vector graphics file is a reversible operation and it does not affect the amount of information required to describe the image. In raster (or bitmap) graphics formats, on the other hand, an image is stored as a matrix of pixels. As we decrease the resolution of the raster image we disregard image pixels, there is a loss of information with the result that the image cannot be recovered to the previous level of detail from the reduced scale, and the amount of information required for describing the image decreases in accordance to the reduction in the complexity.There are many possible choices for the bitmap graphics format with different compression options  #b20 . For instance, the Graphics Interchange Format (GIF) is widely used in the Internet. The GIF format uses LZW data compression, whereas the also commonly employed Portable Network Graphics (PNG) format is based on the DEFLATE compression algorithm.Both compression methods are lossless and belong to the class of dictionary compression methods of the LZ method that share the entropy property. This means that an efficient implementation would give a compressed file size asymptotically approaching the entropy of the data  #b20 . In the Tagged Image File Format (TIFF) one can choose among lossy JPEG image compression, several types of lossless compression or no compression at all. All the compression methods employed in this study: DEFLATE (in PNG image format, in ZIP compressed TIFF format and in the gzip software for external compression of files) and LZW (in TIFF format) belong to the class of lossless dictionary compression methods  #b20 .

D. The compression dimension
Similarly to the definition of information dimension of a fractal object, we now consider the scaling effect on compressed image files of its pictorial representation. If we use an image with N i = n x × n y pixels we need N i symbols to store it, one per pixel. After compression, the minimum file size S, expressed in bits, required to store this information is  #b17  S = N i h,(5)where h (bits/symbol) is the entropy rate of the data file. S is, by definition  #b17 , the entropy of the data file.We now define a magnifying factor of the image (or scale) s such as the total number of pixels used to represent the image isN i (s) = n x × n y = (sn 0x ) × (sn 0y ) = N 0 s 2 ,(6)with N 0 = n 0x × n 0y an arbitrary reference value of the number of pixels.The optimal compressed file size used for storing the image is, using (5) and (6),S(s) = N 0 s 2 h(s).(7)In our former definitions (3), (5), H applies strictly to the fractal set and S and h to the image file. Now, we develop the relationship that exists between the entropy of the fractal and that of its image representation. At a scale s, H(s) is the number of bits required to specify a point of the fractal. Therefore, the total number of points required to specify the fractal at scale s, N f (s), according to (3), isN f = 2 H(s) = N 1 s D ,(8)where N 1 is an unknown integer, since s has been arbitrarily referenced to N 0 .We consider a black and white image of the fractal where an image pixel is coded with the bit 1 if it corresponds to a fractal point and bit 0 otherwise. For a faithful representation, we need that the number of available image pixels exceeds largely the number of pixels required for the description of the fractal at a given resolution level N f (s) << N i (s). A lossless compression of this image can be obtained using the run-length encoding algorithm  #b20 .First, the image can be represented as a binary sequence obtained by the concatenation of the image rows. Then, the information in the image can be encoded as the positions of the 1 bits within that sequence. The list of the stored position values of the black pixels can then be further compressed using a conventional Huffman encoding  #b20 . In the conditions specified above, the entropy of the image file obeys the scaling asymptoticsS(s) ∼ 2 H(s) ∼ s D .(9)The above equation serves as a definition of the compression dimension of a fractal D C asD C ≡ lim s→∞ log S(s) log s ,(10)and we expect that D C permits to estimate the value of D. .

III. COMPUTATIONAL PROCEDURE
The computational procedure used in this work is now described. Of course, this recipe can be conveniently adapted to any particular scenario. We will use compressed image file representations of an object at different scales in order to estimate its fractal dimension.Any lossless type of data compression, either included in the coded bitmap image file or external to it can be used for this purpose. For our first test experiment, we start with an uncompressed TIFF image at each scale and we compress it using gzip. We have checked that using PNG graphics format without further compression produces very similar results.In the first test experiment, the computational procedure used for estimating the fractal dimension is as follows:• STEP 0: Generate an initial uncompressed TIFF version of the downloaded image.Since the source image for which the fractal dimension is estimated can have any type of image format encoding, this step has the specific purpose of uniforming the estimation procedure.• STEP 1: Generate nine versions of the fractal image as TIFF files with no compression at different scales s = 1, 2, . . . 9. This corresponds to reducing the image size to 10%, 20%, · · · , 90% of the original file size.• STEP 2: Compress all the tiff files.• STEP 3: Measure the file sizes S(s) and plot log(S) versus log(s) and determine the physical scaling range.• STEP 4: Determine, using linear regression, the slope of the log-log plot. This is the estimated value of the fractal dimension D sinceS ∼ s D .The free software image processing suit imagemagick [23] has been used for step 1. For instance, the command convert -resize 10% -monochrome -compress None Image.tiff image_s_1.tiff permits one to obtain the smallest s = 1 representation of the original image in file Image.tiff in the file image_s_1.tiff by resizing the image to a 10% of its original size keeping the image as a black and white (monochrome) image and using no compression.For step 2, the free compression software GNU zip (gzip)  #b22  has been used.In the second experiment, different image formats and compression types have been studied. For this reason, STEPs 1 and 2 have been merged in a single operation using ImageMagick software. Also, a second compression of the files has been performed usinggzip. This has permitted to identify situations where the efficiency of the compression was poor and improve the accuracy of the results in these cases.    Table   I For almost all cases, the dimension calculated using the grayscale scaled images D g pro-  vides either equal or better accuracy than that given by the dimension calculated using the black and white scaled images D bw . It is noteworthy how our algorithm provides in most cases good approximation to the exact dimension of the ideal object working with a, necessarily imprecise, representation of the mathematical object in an image file.The worst result is obtained for the Fibonacci fractal displayed in figure 5. A detailed  analysis shows that the image used in this case provides a rather poor representation for this fractal and the files corresponding to values of s from 1 to 3 are actually blank. This result could have been observed directly from the fractal dimension analysis shown in Fig. 5 (b), where no change in the file size S is obtained for these values of s. Once these meaningless data points are eliminated from the analysis, the accuracy estimating the dimension improves, but is still far from the actual value. A poor representation of the fractal complexity in the original image file can be inferred from this result.   compared with the actual value D H = 1.2123.

B. A systematic study based on the Weierstrass cosine function
In this second analysis, a series of computer generated images has been used in order to perform a systematic evaluation of the proposed computational procedure. The fractals have been generated using the Weierstrass cosine function  #b23  W α (t) = M n=0 γ −nα cos (2πγ n t) ,with γ > 1 and 0 < α < 1. For M → ∞ the fractal dimension is D = 2 − α  #b23 .  is generated from the initial image using ImageMagick's convert program. The values in  #b11  have been arbitrarily chosen to produce a more or less regular spacing in the logarithmic plot. As commented above, the scaling factor is set with the simplified version -scale that   The results obtained using PNG format images are plotted in Figure 12 (a). The estimation error displays a characteristic dependence with the number data points in the Matlab plot, with optimal performance at a given N . These results exhibit the expected relation between the image resolution given by the number of image pixels N i , the amount of information required to represent the fractal a given resolution level N f = 2 H , and the number of data points initially used to plot the fractal N . For small N , the error of the estimation decreases as we increase N . If we assume a direct relation between N and the number of pixels corresponding to the fractal for the lowest values of N , an optimum should be obtained as N ∼ N f . At the same time, we need N f << N i for a faithful representation of the fractal and using an excessive number of data points saturates the image without adding more detail. Therefore, the UME grows with N after the optimum value is exceeded. Other tests performed with a reduced resolution of the initial image N i show the same qualitative behavior but with a corresponding reduction in the optimum value of N . It is also noteworthy that the sensitivity of the error to the value of N decreases when smaller values of n s are used and the data for the highest scales are neglected in the calculations. This can be attributed to the incorporation of the fractal information in the grayscale coding along with the pixel averaging in successive downscaling stages, as discussed in Section III.  Figure 12 (a) are correlated with poor linear fits in the log 2 (S) vs log 2 (s) in Figure 12 (b). This reinforces the consistency of the proposed method, since good fits (with small norm of residuals) to poor estimates seem not to be expected.The values of UME in the dimension calculation using TIFF images are shown in Figure   13. Figure 13 (a) shows the results obtained using LZW compression. In general, the UME is substantial, specially for large values of n s . A second compression of the image files using gzip produces significant size reduction factors when the image files are large. This must be linked to a low efficiency of the LZW compressor for large file sizes  #b20 . It can be corrected for with an external compression using gzip prior to the computation of the fractal dimension, as shown in Figure 13(b). Figure 13(c) shows the values of UME obtained using TIFF image format with ZIP compression. These are comparable to those obtained with the PNG format and TIFF with LZW compression plus a second compression using gzip. Also, an external gzip pass to the TIFF files with ZIP compression does not produce an improvement of the estimation error in Figure 13 (d).For each file format, the dimensions calculated with the best UME are shown in Figure   14, together with the theoretical values and the estimations obtained after a second external compression using gzip. The results using PNG images are very good except for the smallest dimension considered. A second compression shows no effect on the results. When TIFF images with LZW compression are used, very large errors are obtained when D < 1.5, but these are due to the aforementioned poor performance of the LZW compressor when the image files are large and are corrected for using a second compression. The accuracy is then excellent except for D = 1.8. Using TIFF images with ZIP compression yields reasonable estimates except for D = 1.2. The details of the downscaling of the image file also affect the estimation of the fractal dimension. This is illustrated in Figure 14  It is interesting to note that worst estimation results tend to show up either at the extreme values of D, closest to D = 2 (the space filling plot) and D = 1 (the case of an ordinary curve in Euclidean space) where the fractal complexity is probably most difficult to capture in an image file.A comparison between the performance of different algorithms commonly used to calculate the dimension of fractal waveforms tested with the Weierstrass cosine function was presented in  #b23 . Even though the methods studied in  #b23  are applied to fractal data sequences and, therefore, are completely different to the computational scheme of this work, which acts of image files, it is interesting to note that the results from the method presented here are comparable, in terms of accuracy, to the most accurate of the methods analyzed in  #b23 , namely, Highuchi method.

V. CONCLUSION
A method to calculate the information dimension of a fractal based on data compression has been presented. An experiment has been set-up using images of fractal sets downloaded from the Internet and freely available software. The results show good agreement in the estimated dimension and the exact values when the image file reproduces enough detail of the geometrical object under study. The proposed scheme is particularly simple and it is even suitable for a hands-on introductory approach to concepts in information theory, fractal geometry and complexity. In a more extensive analysis of the algorithm applied to the Weierstrass cosine function, the accuracy of the calculated dimension is found to be comparable to that of the methods normally employed in the estimation of the dimension